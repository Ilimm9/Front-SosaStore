
    <h2>Historial de ventas</h2>
    <div class="container">
        <div class="mat-elevation-z8 fixed-table-container">
          <table mat-table [dataSource]="dataSource" class="table-striped table-bordered " matSort>
        
            <!-- Column -->

            <ng-container matColumnDef="idVenta">
              <th mat-header-cell *matHeaderCellDef >Id</th>
              <td mat-cell *matCellDef="let element">{{ element.id_venta }}</td>
            </ng-container>
          
            <ng-container matColumnDef="fecha">
                <th mat-header-cell *matHeaderCellDef >Fecha</th>
                <td mat-cell *matCellDef="let element">{{ element.fecha }}</td>
              </ng-container>
            
            <ng-container matColumnDef="precioTotal">
              <th mat-header-cell *matHeaderCellDef >Total</th>
              <td mat-cell *matCellDef="let element">{{ element.total }}</td>
            </ng-container>
      
            <!-- Symbol Column -->
            <ng-container matColumnDef="detallesProductos">
              <th mat-header-cell *matHeaderCellDef >Detalles de Productos </th>
              <td mat-cell *matCellDef="let element">
                <button
                  type="button"
                  class="btn btn-primary"
                data-bs-toggle="modal" 
                data-bs-target="#detallesModal"
                (click)="cargarDetallesVenta(element.id_venta)">
                Detalles
                </button>

            </ng-container>
      
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      
          </table>
<br>  
         

          <div *ngIf="dataSource.data.length === 0" class="empty-table-message fixed-table-container" style="justify-content: center;">
            No hay registros de ventas
          </div>
        </div>
        <mat-paginator [length]="dataSource.data.length"
        [pageSize]="10"
        [pageSizeOptions]="[5, 10]">
</mat-paginator>
      </div>
     

<!-- Modal de detalles de venta -->
<div class="modal fade" id="detallesModal" tabindex="-1" aria-labelledby="detallesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="detallesModalLabel">Detalles de Venta</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="ticket">
          <p>Fecha: {{ venta.fecha | date:'dd/MM/yyyy' }}</p>
          <p>Hora: {{ venta.fecha | date:'HH:mm:ss' }}</p>
          <hr>

          <div class="d-flex justify-content-between">
            <span><strong>Cantidad</strong></span>
            <span><strong>Producto</strong></span>
            <span><strong>Precio Total</strong></span>
          </div>
          
          <div *ngFor="let product of ventaDetalles" class="d-flex justify-content-between">
            <span>{{ product.cantidad }}</span>
            <span>{{ product.nombre_producto }}</span>
            <span>{{ product.total | currency }}</span>
          </div>

          <hr>
          <p class="total-compra"><strong>Total de la Compra:</strong> {{ venta.total | currency }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
